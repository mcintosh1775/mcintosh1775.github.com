<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    {{ partial "head.html" . }}
</head>
<body>
    {{ partial "header.html" . }}
    
    <main>
        <div class="container">
            <article>
                <header>
                    <h1>{{ .Title }}</h1>
                    <div class="episode-meta">
                        {{ if .Date }}
                            <time>{{ .Date.Format "January 2, 2006" }}</time>
                        {{ end }}
                        {{ if .Params.episode }}
                            <span class="episode-number">Episode {{ .Params.episode }}</span>
                        {{ end }}
                    </div>
                    
                    {{ if or .Params.btc_price_usd .Params.btc_price .Params.btc_price_eur .Params.block_height }}
                    <div class="bitcoin-data">
                        {{ if or .Params.btc_price_usd .Params.btc_price .Params.btc_price_eur }}
                            <span class="btc-prices">
                                <strong>BTC:</strong> 
                                {{ if .Params.btc_price_usd }}${{ .Params.btc_price_usd }}{{ else if .Params.btc_price }}{{ .Params.btc_price }}{{ end }}
                                {{ if and (.Params.btc_price_usd | or .Params.btc_price) .Params.btc_price_eur }} / {{ end }}
                                {{ if .Params.btc_price_eur }}â‚¬{{ .Params.btc_price_eur }}{{ end }}
                            </span>
                        {{ end }}
                        {{ if .Params.block_height }}
                            {{ if or .Params.btc_price_usd .Params.btc_price .Params.btc_price_eur }}<span class="separator"> | </span>{{ end }}
                            <span class="block-height"><strong>Block:</strong> {{ .Params.block_height }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                </header>
                
                {{ if .Params.podhome_id }}
                <div class="episode-player">
                    <h2>Listen Now</h2>
                    {{ partial "podhome-player.html" . }}
                </div>
                {{ end }}
                
                {{ if .Content }}
                <div class="episode-content">
                    <h2>Show Notes</h2>
                    <div class="content">
                        {{ .Content }}
                    </div>
                </div>
                {{ end }}
                
                {{ $transcriptPath := printf "episodes/episode-%d-transcript.md" .Params.episode }}
                {{ with .Site.GetPage $transcriptPath }}
                <div class="episode-transcript">
                    <details>
                        <summary><h2>Transcript</h2></summary>
                        <div class="transcript-content">
                            {{ .Content }}
                        </div>
                    </details>
                </div>
                {{ end }}
                
                {{ if .Params.tags }}
                    <div class="tags">
                        {{ range .Params.tags }}
                            <span class="tag">{{ . }}</span>
                        {{ end }}
                    </div>
                {{ end }}
                
                {{ if .Params.episode }}
                    {{ partial "episode-footer.html" . }}
                {{ end }}
            </article>
        </div>
    </main>
    
    {{ partial "footer.html" . }}
    
    {{ if .Params.episode }}
    <script src="https://cdn.podhome.fm/player.min.js"></script>
    {{ end }}
</body>
</html>
